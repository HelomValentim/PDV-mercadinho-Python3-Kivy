#:import SimpleListAdapter kivy.adapters.simplelistadapter.SimpleListAdapter
#:import Label kivy.uix.label.Label
<GerenciadorDeTelas>:
    TelaDeLogin:
        name: "TelaDeLogin"
    TelaFramePrincipal:
        name: "TelaFramePrincipal"
    TelaSistema:
        name: "TelaSistema"
    TelaProdutos:
        name: "TelaProdutos"
    TelaVendas:
        name: "TelaVendas"
    TelaUsuarios:
        name: "TelaUsuarios"
    TelaTabelaProdutosListar:
        name: "TelaTabelaProdutosListar"

<TelaDeLogin>:
    FloatLayout:
        Label:
            text: "login padrão = admin, senha padrão = admin"
            size_hint: None, None
            pos_hint: {"x": .5, "y": .75}
            font_size: 30
            color: .7, 0, 0, 1

        Label:
            text: "Login"
            size_hint: None, None
            pos_hint: {"x": .25, "y": .65}
            font_size: 30
        TextInput:
            id: entradaLogin
            size_hint: None, None
            size: 400, 40
            pos_hint: {"x": .4, "y": .7}
            multiline: False
            font_size: 25
            focus: True
        Label:
            text: "Senha"
            size_hint: None, None
            pos_hint: {"x": .25, "y": .55}
            font_size: 30
        TextInput:
            id: entradaSenha
            size_hint: None, None
            size: 400, 40
            pos_hint: {"x": .4, "y": .6}
            font_size: 25
            multiline: False
            password: True

        Button:
            id: botaoEntrar
            text: "Entrar"
            size_hint: None, None
            size: 150, 50
            pos_hint: {"x": .645, "y": .5}
            on_press: app.entrarNoSistema(entradaLogin.text, entradaSenha.text)
        Label:
            id: labelMensagemLogin
            text: ""
            size_hint: None, None
            pos_hint: {"x": .36, "y": .3}
            font_size: 30

<TelaSistema>:
    StackLayout:
        id: botoesTelas
        pos_hint: None, None
        pos_hint: {"x": 0, "y": 0}
        orientation: 'tb-lr'
        Button:
            text: "Vender"
            font_size: dp(12)
            size_hint: None, None
            size: 60, 60
            on_press: app.abrirTelaVender()
        Button:
            text: "Produtos"
            font_size: dp(12)
            size_hint: None, None
            size: 60, 60
            on_press: app.abrirTelaProdutos()

        Button:
            text: "Usuarios"
            font_size: dp(12)
            size_hint: None, None
            size: 60, 60
            on_press: app.abrirTelaUsuarios()

        Button:
            text: "Clientes"
            font_size: dp(12)
            size_hint: None, None
            size: 60, 60

<TelaVendas>:
    FloatLayout:
        id: TelaVendas
        BoxLayout:
            orientation: "horizontal"
            padding: 20
            spacing: 10
            id: vender
            Button:
                text: "Voltar"
                font_size: dp(15)
                size_hint: None, None
                size: 100, 30
                pos_hint: {"x": 0, "y": .98}
                on_press: app.voltarTelaVender()
            Label:
                text: "Codigo:"
                font_size: dp(15)
                size_hint: None, None
                size: 50, 20
                pos_hint: {"x": 0, "y": .99}
            TextInput:
                id: codigoDoProdutoVenda
                font_size: dp(15)
                size_hint: None, None
                size: 300, 30
                pos_hint: {"x": 0, "y": .98}
            Button:
                text: "Adicionar"
                font_size: dp(15)
                size_hint: None, None
                size: 100, 30
                pos_hint: {"x": 0, "y": .98}
                on_press: app.adicionarProdutoVenda(codigoDoProdutoVenda.text)
        StackLayout:
            id: ProdutosSendoVendidos
            pos_hint: {"x": -.3, "y": -.1}
            orientation: "tb-lr"
        FloatLayout:
            Label:
                id: labelValorTotal
                text: "Total:"
                font_size: 40
                size_hint: None, None
                size: 300, 100
                pos_hint: {"x": .64, "y": .3}
            Label:
                text: "Valor Pago:"
                font_size: 25
                size_hint: None, None
                size: 300, 100
                pos_hint: {"x": .67, "y": .2}

            TextInput:
                id: entradaValorPago
                size_hint: None, None
                size: 130, 50
                font_size: 35
                pos_hint: {"x": .86, "y": .25}
                multiline: False

            Label:
                text: "Troco:"
                font_size: 40
                size_hint: None, None
                size: 300, 100
                pos_hint: {"x": .64, "y": .1}

            Button:
                text: "Finalizar Venda"
                font_size: 25
                size_hint: None, None
                size: 200, 50
                pos_hint: {"x": .75, "y": 0}
<TelaProdutos>:
    StackLayout:
        Button:
            text: "Voltar"
            font_size: dp(15)
            size_hint: None, None
            size: 100, 30
            pos_hint: {"x": 0, "y": .98}
            on_press: app.voltarTelaProdutos()

    TabbedPanel:
        size_hint: 1, .95
        do_default_tab: False #desabilita aba padrão
        TabbedPanelItem:
            text: 'Produtos'
            ListView:
                id: TabelaProdutosListar
                adapter:
                    SimpleListAdapter(
                    data=["{}".format(produto[1]) for produto in app.listaDeProdutos],
                    cls=Label)

        TabbedPanelItem:
            id: cadastroProduto
            text: 'Cadastros'
            FloatLayout:
                Label:
                    text: "[b]Cadastro De Produtos[/b]"
                    size_hint: None, None
                    size: 100, 300
                    pos_hint: {"x": .5, "y": .73}
                    markup: True
                    font_size: 25

                Label:
                    text: "[b]Nome:[/b]"
                    size_hint: None, None
                    pos_hint: {"x": .1, "y": .7}
                    markup: True
                    font_size: 25
                TextInput:
                    id: entradaNomeDoProdutoParaCadastro
                    size_hint: None, None
                    size: 700, 40
                    pos_hint: {"x": .2, "y": .75}
                    multiline: False
                    font_size: 25
                Label:
                    text: "[b]Codigo:[/b]"
                    size_hint: None, None
                    pos_hint: {"x": .1, "y": .6}
                    markup: True
                    font_size: 25
                TextInput:
                    id: entradaCodigoDoProdutoParaCadastro
                    size_hint: None, None
                    size: 500, 40
                    pos_hint: {"x": .2, "y": .65}
                    multiline: False
                    font_size: 25
                Label:
                    text: "[b]Preço:[/b]"
                    size_hint: None, None
                    pos_hint: {"x": .1, "y": .5}
                    markup: True
                    font_size: 25
                TextInput:
                    id: entradaPrecoDoProdutoParaCadastro
                    size_hint: None, None
                    size: 300, 40
                    pos_hint: {"x": .2, "y": .55}
                    multiline: False
                    font_size: 25

                Button:
                    text: "CADASTRAR"
                    size_hint: None, None
                    size: 150, 40
                    pos_hint: {"x": .74, "y": .55}
                    background_color: (0.0, 1.0, 0.0, 1.0)
                    on_press: app.cadastraProduto(entradaNomeDoProdutoParaCadastro.text, entradaCodigoDoProdutoParaCadastro.text, entradaPrecoDoProdutoParaCadastro.text)
                Label:
                    id: labelMensagemCadastroDeProdutos
                    text: ""
                    size_hint: None, None
                    pos_hint: {"x": .1, "y": .3}
                    markup: True
                    font_size: 25
<TelaUsuarios>:
    StackLayout:
        Button:
            text: "Voltar"
            font_size: dp(15)
            size_hint: None, None
            size: 100, 30
            pos_hint: {"x": 0, "y": .98}
            on_press: app.voltarTelaUsuarios()

    TabbedPanel:
        size_hint: 1, .95
        do_default_tab: False #desabilita aba padrão
        TabbedPanelItem:
            text: 'Usuarios'
            ListView:
                id: TabelaProdutosListar
                adapter:
                    SimpleListAdapter(
                    data=["{}".format(usuario[1]) for usuario in app.listaDeUsuarios],
                    cls=Label)

        TabbedPanelItem:
            id: cadastroDeUsuarios
            text: 'Cadastros'
            FloatLayout:
                Label:
                    text: "[b]Cadastro De Usuarios[/b]"
                    size_hint: None, None
                    size: 100, 300
                    pos_hint: {"x": .5, "y": .73}
                    markup: True
                    font_size: 25

                Label:
                    text: "[b]Login[/b]"
                    size_hint: None, None
                    pos_hint: {"x": .1, "y": .7}
                    markup: True
                    font_size: 25
                TextInput:
                    id: entradaLoginUsuarioCadastro
                    size_hint: None, None
                    size: 700, 40
                    pos_hint: {"x": .2, "y": .75}
                    multiline: False
                    font_size: 25
                Label:
                    text: "[b]Nome:[/b]"
                    size_hint: None, None
                    pos_hint: {"x": .1, "y": .6}
                    markup: True
                    font_size: 25
                TextInput:
                    id: entradaNomeUsuarioCadastro
                    size_hint: None, None
                    size: 700, 40
                    pos_hint: {"x": .2, "y": .65}
                    multiline: False
                    font_size: 25
                Label:
                    text: "[b]Senha:[/b]"
                    size_hint: None, None
                    pos_hint: {"x": .1, "y": .5}
                    markup: True
                    font_size: 25
                TextInput:
                    id: entradaSenhaUsuarioCadastro
                    size_hint: None, None
                    size: 500, 40
                    pos_hint: {"x": .2, "y": .55}
                    multiline: False
                    font_size: 25

                Button:
                    text: "CADASTRAR"
                    size_hint: None, None
                    size: 150, 40
                    pos_hint: {"x": .74, "y": .55}
                    background_color: (0.0, 1.0, 0.0, 1.0)
                    on_press: app.cadastraUsuario(entradaLoginUsuarioCadastro.text, entradaNomeUsuarioCadastro.text, entradaSenhaUsuarioCadastro.text)
                Label:
                    id: labelMensagemCadastroDeUsuarios
                    text: ""
                    size_hint: None, None
                    pos_hint: {"x": .1, "y": .3}
                    markup: True
                    font_size: 25

